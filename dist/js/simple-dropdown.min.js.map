{"version":3,"sources":["simple-dropdown.js"],"names":["$","arrowToNextPrev","element","direction","focusIndex","e","upOrDown","preventDefault","find","focus","fn","toggleAttrBoolean","elAttr","this","attr","closeDropdown","$this","removeClass","closest","window","on","each","$dropdown","dropdownToggle","dropdownMenu","toggleClass","hasClass","trigger","Event","windowHeight","innerHeight","bottomOfViewport","scrollTop","dropdownBottomCoord","outerHeight","offset","scrollBottomCoord","animate","index","removeAttr","keyPressed","which","currentFocusData","data","target","is","length","$target","keyCode","document","activeElement","$thisToggle","has","jQuery"],"mappings":";;;;;;CAOC,SAAUA,GACP,aAqCA,SAASC,EAAgBC,EAASC,EAAWC,EAAYC,GACrD,IAAIC,EAEc,OAAdH,EACAG,EAAWF,EAAa,EACH,SAAdD,IACPG,EAAWF,EAAa,GAG5BC,EAAEE,iBAEFL,EACKM,KAAKR,EAAE,qBAAuBM,EAAW,MACzCG,QA/CTT,EAAEU,GAAGC,kBAAoB,SAAUC,GAC/BZ,EAAEa,MAAMC,KAAKF,EACgB,UAAzBZ,EAAEa,MAAMC,KAAKF,GAAsB,OAAS,UAKpDZ,EAAEU,GAAGK,cAAgB,WACjB,IAAIC,EAAQhB,EAAEa,MAEdG,EACKC,YAAY,sBACZC,QAAQ,eACRD,YAAY,sBACZT,KAAK,eACLG,kBAAkB,iBAEvBK,EACKE,QAAQ,eACRV,KAAK,oBACLS,YAAY,kBA8BrBjB,EAAEmB,QAAQC,GAAG,yDAA0D,WAGnEpB,EAAE,eAAeqB,KAAK,WAClB,IA9BkBnB,EA8BdoB,EAAYtB,EAAEa,MACdU,EAAiBD,EAAUd,KAAK,eAChCgB,EAAeF,EAAUd,KAAK,oBAGlCe,EAAeH,GAAG,QAAS,SAASf,GAUhC,GATAA,EAAEE,iBAEFP,EAAEa,MAAMF,kBAAkB,iBAE1BW,EAAUG,YAAY,sBAEtBD,EAAaC,YAAY,iBAGrBD,EAAaE,SAAS,iBAAkB,CAGxCJ,EAAUK,QAAQ3B,EAAE4B,MAAM,mBAG1B,IAAIC,EAAe7B,EAAEmB,QAAQW,cACzBC,EAAmB/B,EAAEmB,QAAQa,YAAcH,EAC3CI,EAAsBT,EAAaU,cAAiBV,EAAaW,SAAY,IAC7EC,EAAoBH,EAAsBJ,EAE1CI,EAAsBF,GACtB/B,EAAE,cAAcqC,QAAQ,CACpBL,UAAWI,EAAoB,IAChC,UA3DGlC,EAiEDoB,GAhEEd,KAAK,4BAAkC,OAAIN,EAAQM,KAAK,oDAAsDN,EAAQM,KAAK,qBAE1Ia,KAAK,SAASiB,GAClBtC,EAAEa,MACG0B,WAAW,oBACXzB,KAAK,mBAAoBwB,KA8D9BhB,EAAUF,GAAG,UAAW,SAASf,GAC7B,IAAIW,EAAQhB,EAAEa,MAEV2B,EAAanC,EAAEoC,MACfC,EAAmB1C,EAAE,UAAU2C,KAAK,eAGrB,KAAfH,GACAvC,EAAgBe,EAAO,OAAQ0B,EAAkBrC,GAGlC,KAAfmC,GACAvC,EAAgBe,EAAO,KAAM0B,EAAkBrC,GAIhC,IAAfmC,IAAqBxC,EAAEK,EAAEuC,QAAQC,GAAGtB,IAAmBD,EAAUd,KAAK,sBAAsBsC,QAC5FzC,EAAEE,mBAKVe,EAAUF,GAAG,QAAS,SAASf,GAC3B,IAAI0C,EAAU/C,EAAEK,EAAEuC,QAIA,KAAdvC,EAAE2C,SACFD,EAAQ7B,QAAQ,eAAe4B,QAC/BC,EAAQ7B,QAAQ,eAAeV,KAAK,oBAAoBkB,SAAS,mBAEjErB,EAAEE,iBACFwC,EACK7B,QAAQ,eACRV,KAAK,eACLC,QACAM,iBAKS,IAAdV,EAAE2C,SACDhD,EAAEiD,SAASC,eAAehC,QAAQ,eAAeV,KAAK,kBAAkBsC,QAEzE9C,EAAE,kCAAkCe,kBAK5CQ,EAAeH,GAAG,QAAS,SAASf,GAChC,IAAI8C,EAAcnD,EAAEa,MAEJ,KAAZR,EAAEoC,OAAsD,UAAtCU,EAAYrC,KAAK,kBACnCd,EAAEa,MAAMc,QAAQ,aAM5B3B,EAAEiD,UAAU7B,GAAG,QAAS,SAASf,GACdL,EAAE,uBAERqB,KAAK,WACV,IAAIL,EAAQhB,EAAEa,MAGqB,IAA/BG,EAAMoC,IAAI/C,EAAEuC,QAAQE,QACpB9B,EAAMD,sBAnK1B,CAwKEsC","sourcesContent":["/*!\n    * Simple Dropdown v2.0.1\n    *\n    * Copyright 2021-2023 Marshall Crosby\n    * https://marshallcrosby.com\n*/\n\n(function ($) {\n    'use strict';\n    \n    // Toggle attribute true/false method\n    $.fn.toggleAttrBoolean = function (elAttr) {\n        $(this).attr(elAttr,\n            $(this).attr(elAttr) === 'false' ? 'true' : 'false'\n        );\n    };\n\n    // Close dropdown method\n    $.fn.closeDropdown = function () {\n        var $this = $(this);\n\n        $this\n            .removeClass('js-dropdown-active')\n            .closest('.b-dropdown')\n            .removeClass('js-dropdown-active')\n            .find('.toggle-btn')\n            .toggleAttrBoolean('aria-expanded');\n\n        $this\n            .closest('.b-dropdown')\n            .find('.b-dropdown-menu')\n            .removeClass('js-is-showing');\n    };\n    \n    // Assign data-arrow-index attr on the fly\n    function assignArrowIndex(element) {\n        var indexEl = (element.find('.b-dropdown-item > input').length) ? element.find('.b-dropdown-item > input, .clear-btn, .apply-btn') : element.find('.b-dropdown-item');\n         \n        indexEl.each(function(index){\n            $(this)\n                .removeAttr('data-arrow-index')\n                .attr('data-arrow-index', index);\n        });\n    }\n\n    function arrowToNextPrev(element, direction, focusIndex, e) {\n        var upOrDown;\n            \n        if (direction === 'up') {\n            upOrDown = focusIndex - 1;\n        } else if (direction === 'down') {\n            upOrDown = focusIndex + 1;\n        }\n        \n        e.preventDefault();\n\n        element\n            .find($('[data-arrow-index=' + upOrDown + ']'))\n            .focus();\n    }\n    \n    $(window).on('select-to-dropdown.ready checkbox-group-dropdown.ready', function() {\n        \n        // Dropdown toggle clicking\n        $('.b-dropdown').each(function() {\n            var $dropdown = $(this);\n            var dropdownToggle = $dropdown.find('.toggle-btn');\n            var dropdownMenu = $dropdown.find('.b-dropdown-menu');\n            \n\n            dropdownToggle.on('click', function(e) {            \n                e.preventDefault();\n                \n                $(this).toggleAttrBoolean('aria-expanded');\n                \n                $dropdown.toggleClass('js-dropdown-active');\n                \n                dropdownMenu.toggleClass('js-is-showing');\n\n                \n                if (dropdownMenu.hasClass('js-is-showing')) {\n                    \n                    // Shown event\n                    $dropdown.trigger($.Event('shown.dropdown'));\n                    \n                    // Scroll into view if needed\n                    var windowHeight = $(window).innerHeight(),\n                        bottomOfViewport = $(window).scrollTop() + windowHeight,\n                        dropdownBottomCoord = dropdownMenu.outerHeight() + (dropdownMenu.offset().top),\n                        scrollBottomCoord = dropdownBottomCoord - windowHeight;\n                                                        \n                    if (dropdownBottomCoord > bottomOfViewport) {\n                        $('html, body').animate({\n                            scrollTop: scrollBottomCoord + 20\n                        }, 250);\n                    }\n                }\n            });\n            \n            // Initial arrow index assign            \n            assignArrowIndex($dropdown);\n            \n            // Make arrow up/down keys tab through the entries\n            $dropdown.on('keydown', function(e) {\n                var $this = $(this);\n                var keyEvent = e;\n                var keyPressed = e.which;\n                var currentFocusData = $(':focus').data('arrow-index');\n                                \n                // Down arrow\n                if (keyPressed === 40) {\n                    arrowToNextPrev($this, 'down', currentFocusData, e);\n                }\n                // Up arrow\n                if (keyPressed === 38) {\n                    arrowToNextPrev($this, 'up', currentFocusData, e);\n                }\n                \n                // Tab key\n                if (keyPressed === 9 && !$(e.target).is(dropdownToggle) && $dropdown.find('[data-arrow-index]').length) {\n                    e.preventDefault();\n                }                    \n            });\n            \n            // Keyboarding\n            $dropdown.on('keyup', function(e) {\n                var $target = $(e.target);\n            \n                // Escape key\n                if (\n                    e.keyCode === 27 &&\n                    $target.closest('.b-dropdown').length &&\n                    $target.closest('.b-dropdown').find('.b-dropdown-menu').hasClass('js-is-showing')\n                ) {\n                    e.preventDefault();\n                    $target\n                        .closest('.b-dropdown')\n                        .find('.toggle-btn')\n                        .focus()\n                        .closeDropdown();\n                }\n                \n                // Tab key\n                if (\n                    e.keyCode === 9 &&\n                    !$(document.activeElement).closest('.b-dropdown').find('.js-is-showing').length\n                ) {\n                    $('.b-dropdown-menu.js-is-showing').closeDropdown();\n                }\n            });\n                        \n            // Allow arrow down key to open dropdown\n            dropdownToggle.on('keyup', function(e) {\n                var $thisToggle = $(this);\n                \n                if (e.which === 40 && $thisToggle.attr('aria-expanded') === 'false') {\n                    $(this).trigger('click');\n                }\n            });\n        });\n                \n        // Close dropdown if clicking out of it\n        $(document).on('click', function(e) {            \n            var dropdown = $('.js-dropdown-active');\n            \n            dropdown.each(function() {\n                var $this = $(this);\n                \n                //check if the clicked area is active dropdown or not\n                if ($this.has(e.target).length === 0) {\n                    $this.closeDropdown();\n                }\n            });\n        });\n    });\n}(jQuery));"]}